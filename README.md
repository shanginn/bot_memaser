# Telegram бот для автопостига фоток в группу Вконтакте

Все мы любим скидывать друг други ржачи и мемасики друзьям телеграм. 
Зачем же пропадать добру?

Этот бот будет автоматически постить фоточки из ваших переписок в группу Вконтакте.
Больше ржаки богу мемасиков!

## Требования

* Python 2.7
* * python-telegram-bot
* * vk_api
* * PyYAML
* Телеграм бот

## Установка

```bash
git clone https://github.com/shanginn/bot_memaser && cd bot_memaser
sudo pip install python-telegram-bot vk_api pyyaml --upgrade
```

## Настройка

```bash
mv config.yml.dist config.yml
```

Идите к [@BotFather](https://telegram.me/BotFather) и создайте бота.
Добавьте HTTP API token в конфиг.

**ВАЖНО!**

Нужно выключить *privacy mode* у бота,
чтобы он смог получить доступ к сообщениям в группе.

Чтобы это сделать возвращайтесь к [@BotFather](https://telegram.me/BotFather) 
и пишите `/setprivacy`, выбирайте вашего бота и тыкайте `Disable`.

Теперь идите в свою группу Вконтакте и в меню под аватаркой группы
нажмите на *Управление сообществом*.

Там выбираем *Настройки* > *Работа с API*, дальше в *Callback API*
И там будет `{"type":"confirmation","group_id":ID_ВАШЕЙ_ГРУППЫ}`

Прописывайте этот ID в конфиг.

*Возможно есть и более простой способ найти ID группы, но для меня этот оказался самым быстым*

Ещё укажите логин и пароль от админа группы.

## Запуск

```bash
python bot.py
```

## TODO

- Не знаю, возможно ли, но было бы здорово сделать постинг без использования
логина и паролья от VK, а только токена группы, но я не нашел как.
- Постинг гифочек. К сожалению, телега сразу конвертит gif в mp4
и не хранит оригинал у себя. Нужно написать конвертер из mp4 в gif
и пост их VK.
- Сбор нескольких фоточек в один пост (например, комиксов)


## Disclaimer

Писалось для себя, пользуйтесь на здоровье! И подписывайтесь на нашу [группу](https://vk.com/orkom) :)